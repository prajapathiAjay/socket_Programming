<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatt application</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="chat-container">
      <div class="chat-header">ğŸ’¬ Real-Time Chat</div>

      <div id="messages">
        <!-- <div class="message incoming">Hello there ğŸ‘‹</div>
        <div class="message outgoing">Hey! How are you?</div> -->
      </div>

      <div class="chat-input-area">
        <input
          class="message-input"
          type="text"
          placeholder="Type your message..."
        />
        <button class="send-button">Send</button>
      </div>
    </div>

    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>
      // this is socket.io js code
      // get elements
       const socket = io.connect('http://localhost:3000');
       const userName=prompt("Enter your name to join:");
       socket.emit("join",userName);
      const messageList = document.querySelector("#messages");
      const messageInput = document.querySelector(".message-input");
      const sendButton = document.querySelector(".send-button");

      sendButton.addEventListener("click", function () {
        // read message and send to the server
        const message = messageInput.value;
        socket.emit("new_message", message);
        const messageElement = document.createElement("div");
        messageElement.innerText =userName + ": " + message;
        messages.appendChild(messageElement);
        messageInput.value = "";
      });


      // listen to the broadcast message and add it to the list
      socket.on("broadcast_message",(userMessage)=>{
        const messageElement = document.createElement("div");
        messageElement.innerText =userMessage.userName+":"+ userMessage.message;
        messages.appendChild(messageElement);
      })

      // const socket = io.connect("http://localhost:3000");
    </script>
  </body>
</html>
